<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="generator" content="Docusaurus v2.0.0-alpha.61">
<title data-react-helmet="true">Operator descriptions | Kafka streams</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:title" content="Operator descriptions | Kafka streams"><meta data-react-helmet="true" name="description" content="most.js API taken from here"><meta data-react-helmet="true" property="og:description" content="most.js API taken from here"><meta data-react-helmet="true" property="og:url" content="https://nodefluent.github.io/kafka-streams/docs/mostAPI"><link data-react-helmet="true" rel="shortcut icon" href="/kafka-streams/🐙"><link data-react-helmet="true" rel="canonical" href="https://nodefluent.github.io/kafka-streams/docs/mostAPI"><link rel="stylesheet" href="/kafka-streams/styles.ad8305e2.css">
<link rel="preload" href="/kafka-streams/styles.1a871891.js" as="script">
<link rel="preload" href="/kafka-streams/runtime~main.7b8057bb.js" as="script">
<link rel="preload" href="/kafka-streams/main.796efdb0.js" as="script">
<link rel="preload" href="/kafka-streams/1.c9d93e90.js" as="script">
<link rel="preload" href="/kafka-streams/2.2ed3b975.js" as="script">
<link rel="preload" href="/kafka-streams/16.82e5cb28.js" as="script">
<link rel="preload" href="/kafka-streams/17.6c960b8e.js" as="script">
<link rel="preload" href="/kafka-streams/6c605efb.8fd640ff.js" as="script">
<link rel="preload" href="/kafka-streams/17896441.92507d38.js" as="script">
<link rel="preload" href="/kafka-streams/6f256d78.67738481.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav class="navbar navbar--light navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/kafka-streams/"><strong class="navbar__title">Kafka Streams 🐙</strong></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/kafka-streams/docs/">Docs</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/nodefluent/kafka-streams" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2aTZ"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_BsTx">🌜</span></div><div class="react-toggle-track-x"><span class="toggle_BsTx">🌞</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/kafka-streams/"><strong class="navbar__title">Kafka Streams 🐙</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/kafka-streams/docs/">Docs</a></li><li class="menu__list-item"><a href="https://github.com/nodefluent/kafka-streams" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_2gpo"><div class="docSidebarContainer_3_JD" role="complementary"><div class="sidebar_2urC"><div class="menu menu--responsive menu_5FrY"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_Dm3K" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Usage</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/kafka-streams/docs/">Quick Start Tutorial</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/kafka-streams/docs/handlingMessageSchemas">Message &#x27;to&#x27; and &#x27;from&#x27; Apache Kafka</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/kafka-streams/docs/ksAPI">API info</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/kafka-streams/docs/mostAPI">Operator descriptions</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/kafka-streams/docs/native">Native Consumer/Producer Explanation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/kafka-streams/docs/sslSasl">SSL, SASL and Kerberos Support</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/kafka-streams/docs/classDoc">Class Documentation</a></li></ul></li></ul></div></div></div><main class="docMainContainer_3EyW"><div class="container padding-vert--lg docItemWrapper_1EkI"><div class="row"><div class="col docItemCol_2ASc"><div class="docItemContainer_3QWW"><article><header><h1 class="docTitle_1Lrw">Operator descriptions</h1></header><div class="markdown"><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="mostjs-api-taken-from-here"></a>most.js API <a href="https://github.com/cujojs/most/blob/master/docs/api.md" target="_blank" rel="noopener noreferrer">taken from here</a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#mostjs-api-taken-from-here" title="Direct link to heading">#</a></h1><ol><li>Reading these docs<ul><li><a href="#notation">Notation</a></li><li><a href="https://github.com/cujojs/most/wiki/Concepts" target="_blank" rel="noopener noreferrer">Concepts</a></li></ul></li><li>API Notes<ul><li><a href="#draft-es-observable-interop">Draft ES Observable interop</a></li></ul></li><li>Creating streams<ul><li><a href="#mostjust">most.just</a>, alias <a href="#mostjust">most.of</a></li><li><a href="#mostfrompromise">most.fromPromise</a></li><li><a href="#mostfrom">most.from</a></li><li><a href="#mostperiodic">most.periodic</a></li><li><a href="#mostempty">most.empty</a></li><li><a href="#mostnever">most.never</a></li><li><a href="#mostiterate">most.iterate</a></li><li><a href="#mostunfold">most.unfold</a></li><li><a href="#mostgenerate">most.generate</a></li><li><a href="#mostfromevent">most.fromEvent</a></li><li><a href="#startwith">startWith</a></li><li><a href="#concat">concat</a></li></ul></li><li>Handling errors<ul><li><a href="#recoverwith">recoverWith</a>, alias <a href="#recoverwith">flatMapError</a></li><li><a href="#mostthrowerror">throwError</a></li></ul></li><li>Transforming streams<ul><li><a href="#map">map</a></li><li><a href="#constant">constant</a></li><li><a href="#scan">scan</a></li><li><a href="#chain">chain</a>, alias <a href="#chain">flatMap</a></li><li><a href="#continuewith">continueWith</a>, alias <a href="#continuewith">flatMapEnd</a></li><li><a href="#concatmap">concatMap</a></li><li><a href="#ap">ap</a></li><li><a href="#timestamp">timestamp</a></li><li><a href="#tap">tap</a></li></ul></li><li>Filtering streams<ul><li><a href="#filter">filter</a></li><li><a href="#skiprepeats">skipRepeats</a></li><li><a href="#skiprepeatswith">skipRepeatsWith</a></li></ul></li><li>Transducer support<ul><li><a href="#transduce">transduce</a></li></ul></li><li>Slicing streams<ul><li><a href="#slice">slice</a></li><li><a href="#take">take</a></li><li><a href="#skip">skip</a></li><li><a href="#takewhile">takeWhile</a></li><li><a href="#skipwhile">skipWhile</a></li><li><a href="#until">until</a>, alias <a href="#until">takeUntil</a></li><li><a href="#since">since</a>, alias <a href="#since">skipUntil</a></li><li><a href="#during">during</a></li></ul></li><li>Looping<ul><li><a href="#loop">loop</a></li></ul></li><li>Adapting fluent APIs<ul><li><a href="#thru">thru</a></li></ul></li><li>Consuming streams<ul><li><a href="#reduce">reduce</a></li><li><a href="#observe">observe</a>, alias <a href="#observe">forEach</a></li><li><a href="#drain">drain</a></li><li><a href="#subscribe">subscribe</a></li></ul></li><li>Combining streams<ul><li><a href="#merge">merge</a></li><li><a href="#mergearray">mergeArray</a></li><li><a href="#combine">combine</a></li><li><a href="#combinearray">combineArray</a></li><li><a href="#sample">sample</a></li><li><a href="#samplewith">sampleWith</a></li><li><a href="#zip">zip</a></li></ul></li><li>Combining higher order streams<ul><li><a href="#switchlatest">switchLatest</a>, alias <a href="#switchlatest">switch</a></li><li><a href="#join">join</a></li><li><a href="#mergeconcurrently">mergeConcurrently</a></li></ul></li><li>Awaiting promises<ul><li><a href="#awaitpromises">awaitPromises</a>, alias <a href="#awaitpromises">await</a></li></ul></li><li>Rate limiting streams<ul><li><a href="#debounce">debounce</a></li><li><a href="#throttle">throttle</a></li></ul></li><li>Delaying streams<ul><li><a href="#delay">delay</a></li></ul></li><li>Sharing stream<ul><li><a href="#multicast">multicast</a></li></ul></li></ol><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="notation"></a>Notation<a aria-hidden="true" tabindex="-1" class="hash-link" href="#notation" title="Direct link to heading">#</a></h2><p>You&#x27;ll see diagrams like the following:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">stream1: -a-b-c-d-&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">stream2: -a--b---c|</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">stream3: -abc-def-X</span></div></div></div></div></div><p>These are timeline diagrams that try to give a simple, representative notion of how a stream behaves over time.  Time proceeds from left to right, using letters and symbols to indicate certain things:</p><ul><li><code>-</code> - an instant in time where no event occurs</li><li>letters (a,b,c,d,etc) - an event at an instant in time</li><li><code>|</code> - end of stream</li><li><code>X</code> - an error occurred at an instant in time</li><li><code>&gt;</code> - stream continues infinitely<ul><li>Typically, <code>&gt;</code> means you can assume that a stream will continue to repeat some common pattern infinitely</li></ul></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="examples"></a>Examples<a aria-hidden="true" tabindex="-1" class="hash-link" href="#examples" title="Direct link to heading">#</a></h3><p><code>stream: a|</code></p><p>A stream that emits <code>a</code> and then ends immediately.</p><p><code>stream: a-b---|</code></p><p>A stream that emits <code>a</code>, then <code>b</code>, and some time later ends.</p><p><code>stream: a-b-X</code></p><p>A stream that emits <code>a</code>, then <code>b</code>, then fails.</p><p><code>stream: abc-def-&gt;</code></p><p>A stream that emits <code>a</code>, then <code>b</code>, then <code>c</code>, then nothing, then <code>d</code>, then <code>e</code>, then <code>f</code>, and then continues infinitely.</p><a target="_blank" rel="noopener noreferrer" name="es7-observable-interop"></a>## Draft ES Observable interop<p>Most.js implements a subset of the <a href="https://github.com/zenparsing/es-observable" target="_blank" rel="noopener noreferrer">draft ES Observable proposal</a>:</p><ul><li><code>stream[Symbol.observable]() -&gt; Observable</code> returns a compatible observable with a <code>subscribe</code> method that other implementations can consume.</li><li><a href="#mostfrom"><code>most.from(observable) -&gt; Stream</code></a> coerces a compliant <code>observable</code> (one that provides <code>[Symbol.observable]()</code>) to a most.js stream.</li><li><a href="#observe"><code>stream.forEach(f) -&gt; Promise</code></a> is fully compatible with the draft ES Observable <code>forEach</code> API.</li><li><a href="#subscribe"><code>stream.subscribe(observer) -&gt; Subscription</code></a> subscribes to a most.js Stream using the draft ES Observable <code>subscribe</code> API.</li></ul><p>This allows most.js to interoperate seamlessly with other implementations, such as <a href="http://reactivex.io/rxjs/" target="_blank" rel="noopener noreferrer">RxJS 5</a>, and <a href="http://rpominov.github.io/kefir/" target="_blank" rel="noopener noreferrer">Kefir</a>.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="consuming-mostjs-streams-with-other-libraries"></a>Consuming most.js streams with other libraries<a aria-hidden="true" tabindex="-1" class="hash-link" href="#consuming-mostjs-streams-with-other-libraries" title="Direct link to heading">#</a></h3><p>Consult the documentation of other libraries for specifics.  Any functions and methods that accept draft ES Observables should accept most.js Streams seamlessly.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="consuming-draft-es-observables-with-mostjs"></a>Consuming draft ES Observables with most.js<a aria-hidden="true" tabindex="-1" class="hash-link" href="#consuming-draft-es-observables-with-mostjs" title="Direct link to heading">#</a></h3><p>Use <code>most.from</code> to coerce any observable to a most.js stream:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-js codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword module" style="font-style:italic">import</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> </span><span class="token keyword module" style="font-style:italic">from</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword module" style="font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;most&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> mostStream </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token keyword module" style="font-style:italic">from</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">anyObservable</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span></div></div></div></div></div><p>You can use <code>most.from</code> in other creative ways as well:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-js codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:rgb(130, 170, 255)">functionThatReturnsAnObservable</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token parameter">a</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// return an observable</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Using chain (aka flatMap)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> mostStream </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">//...</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Use .map.chain</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">mostStream</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">map</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">functionThatReturnsAnObservable</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">chain</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword module" style="font-style:italic">from</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">observe</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">b</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> </span><span class="token console class-name" style="color:rgb(255, 203, 107)">console</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">log</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">b</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Or use function composition, using your favorite FP lib</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">mostStream</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">chain</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token function" style="color:rgb(130, 170, 255)">compose</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">functionThatReturnsAnObservable</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token keyword module" style="font-style:italic">from</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span></div></div></div></div></div><p>A similar approach works with other higher order operations such as <a href="#join"><code>join</code></a> and <a href="#switch"><code>switch</code></a>.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-js codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">mostStream</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">map</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">functionThatReturnsAnObservable</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">map</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword module" style="font-style:italic">from</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">join</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token spread operator" style="color:rgb(137, 221, 255)">...</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">mostStream</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">map</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">functionThatReturnsAnObservable</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">map</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword module" style="font-style:italic">from</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">switch</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token spread operator" style="color:rgb(137, 221, 255)">...</span></div></div></div></div></div><p>Or with merge, combine, etc. by coercing first</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-js codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">arrayOfObservables </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token spread operator" style="color:rgb(137, 221, 255)">...</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">most</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">mergeArray</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">arrayOfObservables</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">map</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword module" style="font-style:italic">from</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">most</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">combineArray</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">combineFunction</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> arrayOfObservables</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">map</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword module" style="font-style:italic">from</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span></div></div></div></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="creating-streams"></a>Creating streams<a aria-hidden="true" tabindex="-1" class="hash-link" href="#creating-streams" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="mostjust"></a>most.just<a aria-hidden="true" tabindex="-1" class="hash-link" href="#mostjust" title="Direct link to heading">#</a></h3><p>Alias: <code>most.of</code></p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="mostjustx---stream"></a><code>most.just(x) -&gt; Stream</code><a aria-hidden="true" tabindex="-1" class="hash-link" href="#mostjustx---stream" title="Direct link to heading">#</a></h4><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="mostofx---stream"></a><code>most.of(x) -&gt; Stream</code><a aria-hidden="true" tabindex="-1" class="hash-link" href="#mostofx---stream" title="Direct link to heading">#</a></h4><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">most.of(x): x|</span></div></div></div></div></div><p>Create a stream containing only x.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-js codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> stream </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> most</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">of</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;hello&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">stream</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">observe</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">x</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> </span><span class="token console class-name" style="color:rgb(255, 203, 107)">console</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">log</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">x</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// logs hello</span></div></div></div></div></div><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-js codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Use `just` for destructured ES6 import</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword module" style="font-style:italic">import</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> just </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword module" style="font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;most&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> stream </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">just</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;hello&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">stream</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">observe</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">x</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> </span><span class="token console class-name" style="color:rgb(255, 203, 107)">console</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">log</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">x</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></div></div></div></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="mostfrompromise"></a>most.fromPromise<a aria-hidden="true" tabindex="-1" class="hash-link" href="#mostfrompromise" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="mostfrompromisepromise---stream"></a><code>most.fromPromise(promise) -&gt; Stream</code><a aria-hidden="true" tabindex="-1" class="hash-link" href="#mostfrompromisepromise---stream" title="Direct link to heading">#</a></h4><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">promise:                   ----a</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">most.fromPromise(promise): ----a|</span></div></div></div></div></div><p>Create a stream containing the outcome of a promise.  If the promise fulfills, the stream will contain the promise&#x27;s value.  If the promise rejects, the stream will be in an error state with the promise&#x27;s rejection reason as its error.  See <a href="#recoverwith">recoverWith</a> for error recovery.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="mostfrom"></a>most.from<a aria-hidden="true" tabindex="-1" class="hash-link" href="#mostfrom" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="mostfromiterable--observable---stream"></a><code>most.from(Iterable | Observable) -&gt; Stream</code><a aria-hidden="true" tabindex="-1" class="hash-link" href="#mostfromiterable--observable---stream" title="Direct link to heading">#</a></h4><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">observable:            -a--b--c--c--&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">most.from(observable): -a--b--c--c--&gt;</span></div></div></div></div></div><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">most.from([1,2,3,4]): 1234|</span></div></div></div></div></div><p>Create a stream containing all items from an Iterable or Observable.</p><p>The observable must provide minimal draft ES observable compliance as per the <a href="https://github.com/zenparsing/es-observable" target="_blank" rel="noopener noreferrer">es-observable draft</a>: it must have a <code>[Symbol.observable]()</code> method that returns an object with a well-behaved <code>.subscribe()</code> method.</p><p>The iterable can be an Array, Array-like, or anything that supports the <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/iterable" target="_blank" rel="noopener noreferrer">iterable protocol</a> or <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/The_Iterator_protocol" target="_blank" rel="noopener noreferrer">iterator protocol</a>, such as a <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/function*" target="_blank" rel="noopener noreferrer">generator</a>. Providing a finite iterable, such as an Array, creates a finite stream. Providing an infinite iterable, such as an infinite generator, creates an infinite stream.</p><p><strong>Note:</strong> <code>from</code> will fail fast by throwing a <code>TypeError</code> <em>synchronously</em> when passed a value that is not an <code>Iterable</code>, <code>Iterator</code>, or <code>Observable</code>.  This indicates an invalid use of <code>from</code>, which should be fixed/prevented rather than handled at runtime.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-js codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Logs 1 2 3 4</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">most</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token keyword module" style="font-style:italic">from</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token number" style="color:rgb(247, 140, 108)">2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token number" style="color:rgb(247, 140, 108)">3</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token number" style="color:rgb(247, 140, 108)">4</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">forEach</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token console class-name" style="color:rgb(255, 203, 107)">console</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">log</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">bind</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">console</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></div></div></div></div></div><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-js codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Strings are Array-like, this works</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Logs a b c d</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">most</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token keyword module" style="font-style:italic">from</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;abcd&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">forEach</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token console class-name" style="color:rgb(255, 203, 107)">console</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">log</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">bind</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">console</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></div></div></div></div></div><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-js codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">function</span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">numbers</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">for</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">i</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">++</span><span class="token plain">i</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword" style="font-style:italic">yield</span><span class="token plain"> i</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Create an infinite stream of numbers</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">var</span><span class="token plain"> stream </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> most</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token keyword module" style="font-style:italic">from</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token function" style="color:rgb(130, 170, 255)">numbers</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Limit the stream to the first 100 numbers</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">stream</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">take</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">100</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">forEach</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token console class-name" style="color:rgb(255, 203, 107)">console</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">log</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">bind</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">console</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></div></div></div></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="mostperiodic"></a>most.periodic<a aria-hidden="true" tabindex="-1" class="hash-link" href="#mostperiodic" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="mostperiodicperiod---stream"></a><code>most.periodic(period) -&gt; Stream</code><a aria-hidden="true" tabindex="-1" class="hash-link" href="#mostperiodicperiod---stream" title="Direct link to heading">#</a></h4><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="mostperiodicperiod-x---stream-deprecated"></a><code>most.periodic(period, x) -&gt; Stream</code> (deprecated)<a aria-hidden="true" tabindex="-1" class="hash-link" href="#mostperiodicperiod-x---stream-deprecated" title="Direct link to heading">#</a></h4><p><strong>Note:</strong> periodic&#x27;s second argument (<code>x</code>) is deprecated. To create a periodic stream with a specific value use <code>constant(x, periodic(period))</code></p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">most.periodic(2): x-x-x-x-x-x-&gt; (x === undefined)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">most.periodic(5, a): a----a----a-&gt;</span></div></div></div></div></div><p>Create an infinite stream containing events that arrive every <code>period</code> milliseconds, and whose value is <code>undefined</code>.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="mostempty"></a>most.empty<a aria-hidden="true" tabindex="-1" class="hash-link" href="#mostempty" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="mostempty---stream"></a><code>most.empty() -&gt; Stream</code><a aria-hidden="true" tabindex="-1" class="hash-link" href="#mostempty---stream" title="Direct link to heading">#</a></h4><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">most.empty(): |</span></div></div></div></div></div><p>Create an already-ended stream containing no events.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="mostnever"></a>most.never<a aria-hidden="true" tabindex="-1" class="hash-link" href="#mostnever" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="mostnever---stream"></a><code>most.never() -&gt; Stream</code><a aria-hidden="true" tabindex="-1" class="hash-link" href="#mostnever---stream" title="Direct link to heading">#</a></h4><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">most.never(): ----&gt;</span></div></div></div></div></div><p>Create a stream that contains no events and never ends.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="mostiterate"></a>most.iterate<a aria-hidden="true" tabindex="-1" class="hash-link" href="#mostiterate" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="mostiteratef-initial---stream"></a><code>most.iterate(f, initial) -&gt; Stream</code><a aria-hidden="true" tabindex="-1" class="hash-link" href="#mostiteratef-initial---stream" title="Direct link to heading">#</a></h4><p>Build an infinite stream by computing successive items iteratively.  Conceptually, the stream will contain: <code>[initial, f(initial), f(f(initial)), ...]</code></p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-js codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// An infinite stream of all integers &gt;= 0, ie</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// 0, 1, 2, 3, 4, 5, ...</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">most</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">iterate</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">function</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">x</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> x </span><span class="token operator" style="color:rgb(137, 221, 255)">+</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></div></div></div></div></div><p>The iterating function may return a promise.  This allows <code>most.iterate</code> to be used to build asynchronous streams of future values.  For example:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-es6 codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">// An infinite stream of all integers &gt;= 0, each delayed</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// by 1 more millisecond than the previous.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// IOW, a stream that decelerates as it produces values:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// 0 (immediately)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// 1 (1 millisecond after 0)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// 2 (2 millisecond after 1)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// 3 (3 millisecond after 2)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// ... etc</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// Take only the first 10</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">most.iterate(x =&gt; delay(x + 1)).take(10);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// Simple promise delay helper</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">const delay = y =&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    new Promise(resolve =&gt; setTimeout(resolve, y, y), 0);</span></div></div></div></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="mostunfold"></a>most.unfold<a aria-hidden="true" tabindex="-1" class="hash-link" href="#mostunfold" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="mostunfoldf-seed---stream"></a><code>most.unfold(f, seed) -&gt; Stream</code><a aria-hidden="true" tabindex="-1" class="hash-link" href="#mostunfoldf-seed---stream" title="Direct link to heading">#</a></h4><p>Build a stream by computing successive items.  Whereas <a href="#reduce"><code>reduce</code></a> tears down a stream to a final value, <code>unfold</code> builds up a stream from a seed value.</p><p>The unfolding function accepts a seed value and must return a tuple: <code>{value:*, seed:*, done:boolean}</code>, or a promise for a tuple.  Returning a promise allows <code>most.unfold</code> to be used to build asynchronous streams of future values.</p><ul><li><code>tuple.value</code> will be emitted as an event.</li><li><code>tuple.seed</code> will be passed to the next invocation of the unfolding function.</li><li><code>tuple.done</code> can be used to stop unfolding.  When <code>tuple.done == true</code>, unfolding will stop.  Additionally, when <code>tuple.done == true</code>:<ul><li><code>tuple.value</code> <strong>(deprecated)</strong> will be used as the stream&#x27;s end signal value.  In future versions, <code>tuple.value</code> will be <em>ignored</em> when <code>tuple.done</code> is <code>true</code></li><li><code>tuple.seed</code> will be ignored</li></ul></li></ul><p>Note that if the unfolding function never returns a tuple with <code>tuple.done == true</code>, the stream will be infinite.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-es6 codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">const urlPrefix = &#x27;product/&#x27;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">const fetch = url =&gt; {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    // ... fetch content and return a promise</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    return Promise.resolve(&#x27;...&#x27;)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// Unfold an infinite stream of products, producing a stream of:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// [rest(&#x27;product/1&#x27;), rest(&#x27;product/2&#x27;), rest(&#x27;product/3&#x27;), ...]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">most.unfold(id =&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    fetch(urlPrefix + id).then(content =&gt; {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        return { value: content, seed: id + 1 }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }), 1)</span></div></div></div></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="mostgenerate"></a>most.generate<a aria-hidden="true" tabindex="-1" class="hash-link" href="#mostgenerate" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="mostgenerategenerator-args---stream"></a><code>most.generate(generator, ...args) -&gt; Stream</code><a aria-hidden="true" tabindex="-1" class="hash-link" href="#mostgenerategenerator-args---stream" title="Direct link to heading">#</a></h4><p>Build a stream by running an <em>asynchronous generator</em>: a generator which yields promises.</p><p>When the generator yields a promise, the promise&#x27;s fulfillment value will be added to the stream.  If the promise rejects, an exception will be thrown in the generator.  You can use <code>try/catch</code> to handle the exception.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-js codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">delayPromise</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">ms</span><span class="token parameter punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token parameter"> value</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">Promise</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">resolve</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">setTimeout</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">resolve</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">value</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> ms</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">function</span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">countdown</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">delay</span><span class="token parameter punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token parameter"> start</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">for</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">let</span><span class="token plain"> i </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> start</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> i </span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">--</span><span class="token plain">i</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword" style="font-style:italic">yield</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">delayPromise</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">delay</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> i</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Logs</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// 3 (after 1 second)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// 2 (after 1 more second)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// 1 (after 1 more second)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">most</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">generate</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">countdown</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1000</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">3</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">observe</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">x</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> </span><span class="token console class-name" style="color:rgb(255, 203, 107)">console</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">log</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">x</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span></div></div></div></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="mostfromevent"></a>most.fromEvent<a aria-hidden="true" tabindex="-1" class="hash-link" href="#mostfromevent" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="mostfromeventeventtype-source--usecapturefalse---stream"></a><code>most.fromEvent(eventType, source [, useCapture=false]) -&gt; Stream</code><a aria-hidden="true" tabindex="-1" class="hash-link" href="#mostfromeventeventtype-source--usecapturefalse---stream" title="Direct link to heading">#</a></h4><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">source:                            -a--b-c---d-&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">most.fromEvent(eventType, source): -a--b-c---d-&gt;</span></div></div></div></div></div><p>Create a stream containing events from the provided <a href="https://developer.mozilla.org/en-US/docs/Web/API/EventTarget" target="_blank" rel="noopener noreferrer">EventTarget</a>, such as a DOM element, or <a href="http://nodejs.org/api/events.html#events_class_events_eventemitter" target="_blank" rel="noopener noreferrer">EventEmitter</a>.  This provides a simple way to coerce existing event sources into streams.</p><p>When passing an EventTarget, you can provide <code>useCapture</code> as the 3rd parameter, and it will be passed through to <code>addEventListener</code> and <code>removeEventListener</code>.  When not provided, <code>useCapture</code> defaults to <code>false</code>.</p><p>When the stream ends (for example, by using <a href="#take">take</a>, <a href="#until">takeUntil</a>, etc.), it will automatically be disconnected from the event source.  For example, in the case of DOM events, the underlying DOM event listener will be removed automatically.</p><p><strong>Notes on EventEmitter</strong></p><ol><li>When source event has more than one argument, all the arguments will be aggregated into array in resulting Stream.</li><li>EventEmitters and EventTargets, such as DOM nodes, behave differently in that EventEmitter allows events to be delivered in the same tick as a listener is added.  When using EventEmitter, <code>most.fromEvent</code>, will <em>ensure asynchronous event delivery</em>, thereby preventing hazards of &quot;maybe sync, maybe async&quot; (aka zalgo) event delivery.</li></ol><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-es6 codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">const clicks = most.fromEvent(&#x27;click&#x27;, document.querySelector(&#x27;.the-button&#x27;));</span></div></div></div></div></div><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-es6 codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">// We can do some event delegation by applying a filter to the stream</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// in conjunction with e.target.matches this will allow only events with</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// .the-button class to be processed</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">var container = document.querySelector(&#x27;.container&#x27;);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">most.fromEvent(&#x27;click&#x27;, container)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    .filter(e =&gt; e.target.matches(&#x27;.the-button&#x27;))</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    .forEach(event =&gt; { /* do something with event */ })</span></div></div></div></div></div><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-es6 codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">// Using preventDefault</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">const form = document.querySelector(&#x27;form&#x27;);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">most.fromEvent(&#x27;submit&#x27;, form)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    .tap(e =&gt; e.preventDefault())</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    .map(parseForm)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    .map(JSON.stringify)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    .forEach(event =&gt; { /* do something with JSON data */ })</span></div></div></div></div></div><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-es6 codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">// Using event delegation with Element.matches</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// This allows only events with the .toggle-button class</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// It also only calls preventDefault on allowed events</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">const container = document.querySelector(&#x27;.container&#x27;);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">most.fromEvent(&#x27;click&#x27;, container)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    .filter(e =&gt; e.target.matches(&#x27;.toggle-button&#x27;))</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    .tap(e =&gt; e.preventDefault())</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    .forEach(event =&gt; { /* do something with event */ })</span></div></div></div></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="startwith"></a>startWith<a aria-hidden="true" tabindex="-1" class="hash-link" href="#startwith" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="streamstartwithx---stream"></a><code>stream.startWith(x) -&gt; Stream</code><a aria-hidden="true" tabindex="-1" class="hash-link" href="#streamstartwithx---stream" title="Direct link to heading">#</a></h4><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="moststartwithx-stream---stream"></a><code>most.startWith(x, stream) -&gt; Stream</code><a aria-hidden="true" tabindex="-1" class="hash-link" href="#moststartwithx-stream---stream" title="Direct link to heading">#</a></h4><p>Create a new stream containing <code>x</code> followed by all events in <code>stream</code>.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">stream:              a-b-c-d-&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">stream.startWith(x): xa-b-c-d-&gt;</span></div></div></div></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="concat"></a>concat<a aria-hidden="true" tabindex="-1" class="hash-link" href="#concat" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="stream1concatstream2---stream"></a><code>stream1.concat(stream2) -&gt; Stream</code><a aria-hidden="true" tabindex="-1" class="hash-link" href="#stream1concatstream2---stream" title="Direct link to heading">#</a></h4><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="mostconcatstream1-stream2---stream"></a><code>most.concat(stream1, stream2) -&gt; Stream</code><a aria-hidden="true" tabindex="-1" class="hash-link" href="#mostconcatstream1-stream2---stream" title="Direct link to heading">#</a></h4><p>Create a new stream containing all events in <code>stream1</code> followed by all events in <code>stream2</code>.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">stream1:                 -a-b-c|</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">stream2:                 -d-e-f-&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">stream1.concat(stream2): -a-b-c-d-e-f-&gt;</span></div></div></div></div></div><p>Note that this effectively <em>timeshifts</em> events from <code>stream2</code> past the end time of <code>stream1</code>.  In contrast, other operations such as <a href="#combine"><code>combine</code></a>, <a href="#merge"><code>merge</code></a>, <a href="#chain">chain</a> <em>preserve event arrival times</em>, allowing events from the multiple combined streams to interleave.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="handling-errors"></a>Handling errors<a aria-hidden="true" tabindex="-1" class="hash-link" href="#handling-errors" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="recoverwith"></a>recoverWith<a aria-hidden="true" tabindex="-1" class="hash-link" href="#recoverwith" title="Direct link to heading">#</a></h3><p>Alias: <strong>flatMapError</strong></p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="streamrecoverwithf---stream"></a><code>stream.recoverWith(f) -&gt; Stream</code><a aria-hidden="true" tabindex="-1" class="hash-link" href="#streamrecoverwithf---stream" title="Direct link to heading">#</a></h4><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="mostrecoverwithf-stream---stream"></a><code>most.recoverWith(f, stream) -&gt; Stream</code><a aria-hidden="true" tabindex="-1" class="hash-link" href="#mostrecoverwithf-stream---stream" title="Direct link to heading">#</a></h4><p>Recover from a stream failure by calling a function to create a new stream.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">stream:                 -a-b-c-X</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">f(X):                   -d-e-f-&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">stream.recoverWith(f): -a-b-c-d-e-f-&gt;</span></div></div></div></div></div><p>When a stream fails with an error, the error will be passed to <code>f</code>.  <code>f</code> must return a new stream to replace the error.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-es6 codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">const fetch = url =&gt; {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    // ... fetch content and return a promise</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    return Promise.resolve(&#x27;...&#x27;)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">const stream = most.fromPromise(fetch(&#x27;http://myapi.com/things&#x27;));</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// Try to process data from the real API, but fall back</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// to some default data if that fails.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">stream.map(JSON.parse)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    .recoverWith(e =&gt; most.of(defaultData))</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    .forEach(processData);</span></div></div></div></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="mostthrowerror"></a>most.throwError<a aria-hidden="true" tabindex="-1" class="hash-link" href="#mostthrowerror" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="mostthrowerrorerror---stream"></a><code>most.throwError(error) -&gt; Stream</code><a aria-hidden="true" tabindex="-1" class="hash-link" href="#mostthrowerrorerror---stream" title="Direct link to heading">#</a></h4><p>Create a stream in the error state.  This can be useful for functions that need to return a stream, but need to signal an error.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">most.throwError(X): X</span></div></div></div></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="transforming-streams"></a>Transforming streams<a aria-hidden="true" tabindex="-1" class="hash-link" href="#transforming-streams" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="map"></a>map<a aria-hidden="true" tabindex="-1" class="hash-link" href="#map" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="streammapf---stream"></a><code>stream.map(f) -&gt; Stream</code><a aria-hidden="true" tabindex="-1" class="hash-link" href="#streammapf---stream" title="Direct link to heading">#</a></h4><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="mostmapf-stream---stream"></a><code>most.map(f, stream) -&gt; Stream</code><a aria-hidden="true" tabindex="-1" class="hash-link" href="#mostmapf-stream---stream" title="Direct link to heading">#</a></h4><p>Create a new stream by applying <code>f</code> to each event of the input stream.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">stream:           -a-b-c-d-&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">stream.map(add1): -f(a)-f(b)-f(c)-f(d)-&gt;</span></div></div></div></div></div><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-js codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Logs 2 3 4 5</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">most</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token keyword module" style="font-style:italic">from</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token number" style="color:rgb(247, 140, 108)">2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token number" style="color:rgb(247, 140, 108)">3</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token number" style="color:rgb(247, 140, 108)">4</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">map</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">function</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">x</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> x </span><span class="token operator" style="color:rgb(137, 221, 255)">+</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">forEach</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token console class-name" style="color:rgb(255, 203, 107)">console</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">log</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">bind</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">console</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></div></div></div></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="constant"></a>constant<a aria-hidden="true" tabindex="-1" class="hash-link" href="#constant" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="streamconstantx---stream"></a><code>stream.constant(x) -&gt; Stream</code><a aria-hidden="true" tabindex="-1" class="hash-link" href="#streamconstantx---stream" title="Direct link to heading">#</a></h4><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="mostconstantx-stream---stream"></a><code>most.constant(x, stream) -&gt; Stream</code><a aria-hidden="true" tabindex="-1" class="hash-link" href="#mostconstantx-stream---stream" title="Direct link to heading">#</a></h4><p>Create a new stream by replacing each event of the input stream with <code>x</code>.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">stream:             -a-b-c-d-&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">stream.constant(x): -x-x-x-x-&gt;</span></div></div></div></div></div><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-js codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Logs 1 1 1 1</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">most</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token keyword module" style="font-style:italic">from</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token number" style="color:rgb(247, 140, 108)">2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token number" style="color:rgb(247, 140, 108)">3</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token number" style="color:rgb(247, 140, 108)">4</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">constant</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">forEach</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token console class-name" style="color:rgb(255, 203, 107)">console</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">log</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">bind</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">console</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></div></div></div></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="scan"></a>scan<a aria-hidden="true" tabindex="-1" class="hash-link" href="#scan" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="streamscanf-initial---stream"></a><code>stream.scan(f, initial) -&gt; Stream</code><a aria-hidden="true" tabindex="-1" class="hash-link" href="#streamscanf-initial---stream" title="Direct link to heading">#</a></h4><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="mostscanf-initial-stream---stream"></a><code>most.scan(f, initial, stream) -&gt; Stream</code><a aria-hidden="true" tabindex="-1" class="hash-link" href="#mostscanf-initial-stream---stream" title="Direct link to heading">#</a></h4><p>Create a new stream containing incrementally accumulated results, starting with the provided initial value.</p><p><code>function f(accumulated, x) -&gt; newAccumulated</code></p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">stream:              -1-2-3-&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">stream.scan(add, 0): 01-3-6-&gt;</span></div></div></div></div></div><p>Unlike <a href="#reduce">reduce</a> which produces a single, final result, scan emits incremental results.  The resulting stream is of the same proportion as the original.  For example, if the original contains 10 events, the resulting stream will contain 11 (the initial value, followed by 10 incremental events).  If the original stream is infinite, the resulting stream will be infinite.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-es6 codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">// Logs a ab abc abcd</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">most.from([&#x27;a&#x27;, &#x27;b&#x27;, &#x27;c&#x27;, &#x27;d&#x27;])</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    .scan((string, letter) =&gt; string + letter, &#x27;&#x27;)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    .forEach(s =&gt; console.log(s));</span></div></div></div></div></div><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-es6 codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">// Maintain a sliding window of (up to) 3 values in an array</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// A stream containing all integers &gt;= 0</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">const numbers = most.iterate(x =&gt; x + 1, 0);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">const nextWindow = (slidingWindow, x) =&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    slidingWindow.concat(x).slice(-3)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// Logs</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// []</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// [0]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// [0,1]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// [0,1,2]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// [1,2,3]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// [2,3,4]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// ... etc ...</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">numbers.scan(nextWindow, [])</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    .take(10)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    .forEach(array =&gt; console.log(array));</span></div></div></div></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="chain"></a>chain<a aria-hidden="true" tabindex="-1" class="hash-link" href="#chain" title="Direct link to heading">#</a></h3><p>Alias: <strong>flatMap</strong></p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="streamchainf---stream"></a><code>stream.chain(f) -&gt; Stream</code><a aria-hidden="true" tabindex="-1" class="hash-link" href="#streamchainf---stream" title="Direct link to heading">#</a></h4><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="mostchainf-stream---stream"></a><code>most.chain(f, stream) -&gt; Stream</code><a aria-hidden="true" tabindex="-1" class="hash-link" href="#mostchainf-stream---stream" title="Direct link to heading">#</a></h4><p>Transform each event in <code>stream</code> into a stream, and then merge it into the resulting stream. Note that <code>f</code> <em>must</em> return a stream.</p><p><code>function f(x) -&gt; Stream</code></p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">stream:            -a----b----c|</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">f(a):               1--2--3|</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">f(b):                    1----2----3|</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">f(c):                           1-2-3|</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">stream.chain(f):   -1--2-13---2-1-233|</span></div></div></div></div></div><p>Note the difference between <a href="#concatmap"><code>concatMap</code></a> and <a href="#chain"><code>chain</code></a>: <code>concatMap</code> concatenates, while <code>chain</code> merges.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-es6 codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">// Logs: 1 2 1 1 2 1 1 2 2 2</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">most.from([1, 2])</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    .chain(x =&gt; most.periodic(x * 10).take(5).constant(x))</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    .observe(x =&gt; console.log(x));</span></div></div></div></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="continuewith"></a>continueWith<a aria-hidden="true" tabindex="-1" class="hash-link" href="#continuewith" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="streamcontinuewithf---stream"></a><code>stream.continueWith(f) -&gt; Stream</code><a aria-hidden="true" tabindex="-1" class="hash-link" href="#streamcontinuewithf---stream" title="Direct link to heading">#</a></h4><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="mostcontinuewithf-stream---stream"></a><code>most.continueWith(f, stream) -&gt; Stream</code><a aria-hidden="true" tabindex="-1" class="hash-link" href="#mostcontinuewithf-stream---stream" title="Direct link to heading">#</a></h4><p>Replace the end signal with a new stream returned by f. Note that f <em>must</em> return a stream.</p><p><code>function f(x) -&gt; Stream</code></p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">stream:               -a-b-c-d-e-f-&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">stream.take(4):       -a-b-c-d|end</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">f(end):                        1-2-3-4-5-&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">stream.continueWith(f): -a-b-c-d-1-2-3-4-5-&gt;</span></div></div></div></div></div><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-es6 codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">most.periodic(10, &#x27;x&#x27;)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    .take(4)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    .continueWith(() =&gt; most.iterate(x =&gt; x + 1, 1).take(5))</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        .observe(x =&gt; console.log(x));</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  // Logs: x 4 times... ends and then logs 1, 2, 3, 4, 5</span></div></div></div></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="concatmap"></a>concatMap<a aria-hidden="true" tabindex="-1" class="hash-link" href="#concatmap" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="streamconcatmapf---stream"></a><code>stream.concatMap(f) -&gt; Stream</code><a aria-hidden="true" tabindex="-1" class="hash-link" href="#streamconcatmapf---stream" title="Direct link to heading">#</a></h4><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="mostconcatmapf-stream---stream"></a><code>most.concatMap(f, stream) -&gt; Stream</code><a aria-hidden="true" tabindex="-1" class="hash-link" href="#mostconcatmapf-stream---stream" title="Direct link to heading">#</a></h4><p>Transform each event in <code>stream</code> into a stream, and then concatenate it onto the end of the resulting stream. Note that <code>f</code> <em>must</em> return a stream.</p><p>The mapping function <code>f</code> is applied <em>lazily</em>.  That is, <code>f</code> is called only once it is time to concatenate a new stream.</p><p><code>function f(x) -&gt; Stream</code></p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">stream:              -a----b----c|</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">f(a):                 1--2--3|</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">f(b):                      1----2----3|</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">f(c):                             1-2-3|</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">stream.concatMap(f): -1--2--31----2----31-2-3|</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">f called lazily:      ^      ^          ^</span></div></div></div></div></div><p>Note the difference between <a href="#concatmap"><code>concatMap</code></a> and <a href="#chain"><code>chain</code></a>: <code>concatMap</code> concatenates, while <code>chain</code> merges.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-es6 codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">// Logs: 1 1 1 1 1 2 2 2 2 2</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">most.from([1, 2])</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    .concatMap(x =&gt; most.periodic(x * 10).take(5).constant(x))</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    .observe(console.log.bind(console));</span></div></div></div></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="ap"></a>ap<a aria-hidden="true" tabindex="-1" class="hash-link" href="#ap" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="streamoffunctionsapstream---stream"></a><code>streamOfFunctions.ap(stream) -&gt; Stream</code><a aria-hidden="true" tabindex="-1" class="hash-link" href="#streamoffunctionsapstream---stream" title="Direct link to heading">#</a></h4><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="mostapstreamoffunctions-stream---stream"></a><code>most.ap(streamOfFunctions, stream) -&gt; Stream</code><a aria-hidden="true" tabindex="-1" class="hash-link" href="#mostapstreamoffunctions-stream---stream" title="Direct link to heading">#</a></h4><p>Apply the latest function in <code>streamOfFunctions</code> to the latest value in <code>stream</code>.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">streamOfFunctions:            --f---------g--------h------&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">stream:                       -a-------b-------c-------d--&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">streamOfFunctions.ap(stream): --fa-----fb-gb---gc--hc--hd-&gt;</span></div></div></div></div></div><p>In effect, <code>ap</code> applies a <em>time-varying function</em> to a <em>time-varying value</em>.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="timestamp"></a>timestamp<a aria-hidden="true" tabindex="-1" class="hash-link" href="#timestamp" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="streamtimestamp---stream"></a><code>stream.timestamp() -&gt; Stream</code><a aria-hidden="true" tabindex="-1" class="hash-link" href="#streamtimestamp---stream" title="Direct link to heading">#</a></h4><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="mosttimestampstream---stream"></a><code>most.timestamp(stream) -&gt; Stream</code><a aria-hidden="true" tabindex="-1" class="hash-link" href="#mosttimestampstream---stream" title="Direct link to heading">#</a></h4><p>Materialize event timestamps, transforming <code>Stream&lt;X&gt;</code> into <code>Stream&lt;{ time:number, value:X }&gt;</code></p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-es6 codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">// Logs</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// { time: 1418740004055, value: &#x27;hello&#x27; }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// { time: 1418740004065, value: &#x27;hello&#x27; }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// { time: 1418740004075, value: &#x27;hello&#x27; }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// { time: 1418740004085, value: &#x27;hello&#x27; }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// ... etc</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">most.periodic(10).constant(&#x27;hello&#x27;)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    .timestamp()</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    .take(10)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    .observe(console.log.bind(console));</span></div></div></div></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="tap"></a>tap<a aria-hidden="true" tabindex="-1" class="hash-link" href="#tap" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="streamtapf---stream"></a><code>stream.tap(f) -&gt; Stream</code><a aria-hidden="true" tabindex="-1" class="hash-link" href="#streamtapf---stream" title="Direct link to heading">#</a></h4><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="mosttapf-stream---stream"></a><code>most.tap(f, stream) -&gt; Stream</code><a aria-hidden="true" tabindex="-1" class="hash-link" href="#mosttapf-stream---stream" title="Direct link to heading">#</a></h4><p>Perform a side-effect for each event in <code>stream</code>.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">stream:        -a-b-c-d-&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">stream.tap(f): -a-b-c-d-&gt;</span></div></div></div></div></div><p>For each event in <code>stream</code>, <code>f</code> is called, but the value of its result is ignored. If <code>f</code> fails (ie throws), then the returned stream will also fail.  The stream returned by <code>tap</code> will contain the same events as the original stream.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="filtering-streams"></a>Filtering streams<a aria-hidden="true" tabindex="-1" class="hash-link" href="#filtering-streams" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="filter"></a>filter<a aria-hidden="true" tabindex="-1" class="hash-link" href="#filter" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="streamfilterpredicate---stream"></a><code>stream.filter(predicate) -&gt; Stream</code><a aria-hidden="true" tabindex="-1" class="hash-link" href="#streamfilterpredicate---stream" title="Direct link to heading">#</a></h4><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="mostfilterpredicate-stream---stream"></a><code>most.filter(predicate, stream) -&gt; Stream</code><a aria-hidden="true" tabindex="-1" class="hash-link" href="#mostfilterpredicate-stream---stream" title="Direct link to heading">#</a></h4><p>Create a stream containing only events for which <code>predicate</code> returns truthy.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">stream:              -1-2-3-4-&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">stream.filter(even): ---2---4-&gt;</span></div></div></div></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="skiprepeats"></a>skipRepeats<a aria-hidden="true" tabindex="-1" class="hash-link" href="#skiprepeats" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="streamskiprepeats---stream"></a><code>stream.skipRepeats() -&gt; Stream</code><a aria-hidden="true" tabindex="-1" class="hash-link" href="#streamskiprepeats---stream" title="Direct link to heading">#</a></h4><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="mostskiprepeatsstream---stream"></a><code>most.skipRepeats(stream) -&gt; Stream</code><a aria-hidden="true" tabindex="-1" class="hash-link" href="#mostskiprepeatsstream---stream" title="Direct link to heading">#</a></h4><p>Create a new stream with <em>adjacent</em> repeated events removed.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">stream:            -1-2-2-3-4-4-5-&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">stream.skipRepeats(): -1-2---3-4---5-&gt;</span></div></div></div></div></div><p>Note that <code>===</code> is used to identify duplicate items.  To use a different comparison, use <a href="#skiprepeatswith"><code>skipRepeatsWith</code></a></p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="skiprepeatswith"></a>skipRepeatsWith<a aria-hidden="true" tabindex="-1" class="hash-link" href="#skiprepeatswith" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="streamskiprepeatswithequals---stream"></a><code>stream.skipRepeatsWith(equals) -&gt; Stream</code><a aria-hidden="true" tabindex="-1" class="hash-link" href="#streamskiprepeatswithequals---stream" title="Direct link to heading">#</a></h4><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="mostskiprepeatswithequals-stream---stream"></a><code>most.skipRepeatsWith(equals, stream) -&gt; Stream</code><a aria-hidden="true" tabindex="-1" class="hash-link" href="#mostskiprepeatswithequals-stream---stream" title="Direct link to heading">#</a></h4><p>Create a new stream with <em>adjacent</em> repeated events removed, using the provided <code>equals</code> function.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">stream:                              -a-b-B-c-D-d-e-&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">stream.skipRepeatsWith(equalsIgnoreCase): -a-b---c-D---e-&gt;</span></div></div></div></div></div><p>The <code>equals</code> function should accept two values and return truthy if the two values are equal, or falsy if they are not equal.</p><p><code>function equals(a, b) -&gt; boolean</code></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="transducer-support"></a>Transducer support<a aria-hidden="true" tabindex="-1" class="hash-link" href="#transducer-support" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="transduce"></a>transduce<a aria-hidden="true" tabindex="-1" class="hash-link" href="#transduce" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="streamtransducetransducer---stream"></a><code>stream.transduce(transducer) -&gt; Stream</code><a aria-hidden="true" tabindex="-1" class="hash-link" href="#streamtransducetransducer---stream" title="Direct link to heading">#</a></h4><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="mosttransducetransducer-stream---stream"></a><code>most.transduce(transducer, stream) -&gt; Stream</code><a aria-hidden="true" tabindex="-1" class="hash-link" href="#mosttransducetransducer-stream---stream" title="Direct link to heading">#</a></h4><p>Create a new stream by passing items through the provided transducer.</p><p><a href="http://simplectic.com/blog/2014/transducers-explained-1/" target="_blank" rel="noopener noreferrer">Transducers</a> are composable transformations.  They may map, filter, add items to, drop items from, or otherwise transform an event stream.  The primary benefit of transducers is that they are composable and reusable across any data structures that support them (see note on performance below)</p><p>Most.js supports any transducer that implements the <em>de facto</em> JavaScript transducer protocol.  For example, two popular transducers libraries are <a href="https://github.com/cognitect-labs/transducers-js" target="_blank" rel="noopener noreferrer">transducers-js</a> and <a href="https://github.com/jlongster/transducers.js" target="_blank" rel="noopener noreferrer">transducers.js</a>.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-es6 codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">// Create a transducer that slices, filters, and maps</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">import transducers from &#x27;transducers-js&#x27;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">var transducer = transducers.comp(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    transducers.take(4),</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    transducers.filter(x =&gt; x % 2 === 0),</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    transducers.map(x =&gt; x + 1)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// Logs 3 5</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">most.from([1,2,3,4,5,6,7,8,9])</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    .transduce(transducer)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    .observe(x =&gt; console.log(x))</span></div></div></div></div></div><p><strong>Note on transducer performance:</strong> Transducers perform single-pass transformation.  For many data structures, this can provide a significant performance improvement.  However, most.js&#x27;s builtin combinators currently outperform popular transducer libraries.  The primary benefit of using transducers with most.js is reusability and portability.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="slicing-streams"></a>Slicing streams<a aria-hidden="true" tabindex="-1" class="hash-link" href="#slicing-streams" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="slice"></a>slice<a aria-hidden="true" tabindex="-1" class="hash-link" href="#slice" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="streamslicestart-end---stream"></a><code>stream.slice(start, end) -&gt; Stream</code><a aria-hidden="true" tabindex="-1" class="hash-link" href="#streamslicestart-end---stream" title="Direct link to heading">#</a></h4><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="mostslicestart-end-stream---stream"></a><code>most.slice(start, end, stream) -&gt; Stream</code><a aria-hidden="true" tabindex="-1" class="hash-link" href="#mostslicestart-end-stream---stream" title="Direct link to heading">#</a></h4><p>Create a new stream containing only events where <code>start &lt;= index &lt; end</code>, where <code>index</code> is the ordinal index of an event in <code>stream</code>.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">stream:             -a-b-c-d-e-f-&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">stream.slice(1, 4): ---b-c-d|</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">stream:             -a-b-c|</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">stream.slice(1, 4): ---b-c|</span></div></div></div></div></div><p>If stream contains fewer than <code>start</code> events, the returned stream will be empty.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="take"></a>take<a aria-hidden="true" tabindex="-1" class="hash-link" href="#take" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="streamtaken---stream"></a><code>stream.take(n) -&gt; Stream</code><a aria-hidden="true" tabindex="-1" class="hash-link" href="#streamtaken---stream" title="Direct link to heading">#</a></h4><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="mosttaken-stream---stream"></a><code>most.take(n, stream) -&gt; Stream</code><a aria-hidden="true" tabindex="-1" class="hash-link" href="#mosttaken-stream---stream" title="Direct link to heading">#</a></h4><p>Create a new stream containing at most <code>n</code> events from <code>stream</code>.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">stream:         -a-b-c-d-e-f-&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">stream.take(3): -a-b-c|</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">stream:         -a-b|</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">stream.take(3): -a-b|</span></div></div></div></div></div><p>If <code>stream</code> contains fewer than <code>n</code> events, the returned stream will be effectively equivalent to <code>stream</code>.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="skip"></a>skip<a aria-hidden="true" tabindex="-1" class="hash-link" href="#skip" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="streamskipn---stream"></a><code>stream.skip(n) -&gt; Stream</code><a aria-hidden="true" tabindex="-1" class="hash-link" href="#streamskipn---stream" title="Direct link to heading">#</a></h4><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="mostskipn-stream---stream"></a><code>most.skip(n, stream) -&gt; Stream</code><a aria-hidden="true" tabindex="-1" class="hash-link" href="#mostskipn-stream---stream" title="Direct link to heading">#</a></h4><p>Create a new stream that omits the first <code>n</code> events from <code>stream</code>.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">stream:         -a-b-c-d-e-f-&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">stream.skip(3): -------d-e-f-&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">stream:         -a-b-c-d-e|</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">stream.skip(3): -------d-e|</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">stream:         -a-b-c|</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">stream.skip(3): ------|</span></div></div></div></div></div><p>If <code>stream</code> contains fewer than <code>n</code> events, the returned stream will be empty.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="takewhile"></a>takeWhile<a aria-hidden="true" tabindex="-1" class="hash-link" href="#takewhile" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="streamtakewhilepredicate---stream"></a><code>stream.takeWhile(predicate) -&gt; Stream</code><a aria-hidden="true" tabindex="-1" class="hash-link" href="#streamtakewhilepredicate---stream" title="Direct link to heading">#</a></h4><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="mosttakewhilepredicate-stream---stream"></a><code>most.takeWhile(predicate, stream) -&gt; Stream</code><a aria-hidden="true" tabindex="-1" class="hash-link" href="#mosttakewhilepredicate-stream---stream" title="Direct link to heading">#</a></h4><p>Create a new stream containing all events until <code>predicate</code> returns false.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">stream:                 -2-4-5-6-8-&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">stream.takeWhile(even): -2-4-|</span></div></div></div></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="skipwhile"></a>skipWhile<a aria-hidden="true" tabindex="-1" class="hash-link" href="#skipwhile" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="streamskipwhilepredicate---stream"></a><code>stream.skipWhile(predicate) -&gt; Stream</code><a aria-hidden="true" tabindex="-1" class="hash-link" href="#streamskipwhilepredicate---stream" title="Direct link to heading">#</a></h4><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="mostskipwhilepredicate-stream---stream"></a><code>most.skipWhile(predicate, stream) -&gt; Stream</code><a aria-hidden="true" tabindex="-1" class="hash-link" href="#mostskipwhilepredicate-stream---stream" title="Direct link to heading">#</a></h4><p>Create a new stream containing all events after <code>predicate</code> returns false.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">stream:                 -2-4-5-6-8-&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">stream.skipWhile(even): -----5-6-8-&gt;</span></div></div></div></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="until"></a>until<a aria-hidden="true" tabindex="-1" class="hash-link" href="#until" title="Direct link to heading">#</a></h3><p>Alias: <strong>takeUntil</strong></p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="streamuntilendsignal---stream"></a><code>stream.until(endSignal) -&gt; Stream</code><a aria-hidden="true" tabindex="-1" class="hash-link" href="#streamuntilendsignal---stream" title="Direct link to heading">#</a></h4><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="mostuntilendsignal-stream---stream"></a><code>most.until(endSignal, stream) -&gt; Stream</code><a aria-hidden="true" tabindex="-1" class="hash-link" href="#mostuntilendsignal-stream---stream" title="Direct link to heading">#</a></h4><p>Create a new stream containing all events until <code>endSignal</code> emits an event.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">stream:                  -a-b-c-d-e-f-&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">endSignal:               ------z-&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">stream.until(endSignal): -a-b-c|</span></div></div></div></div></div><p>If <code>endSignal</code> is empty or never emits an event, then the returned stream will be effectively equivalent to <code>stream</code>.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-es6 codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">// Log mouse events until the user clicks. Note that DOM event handlers will</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// automatically be unregistered.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">most.fromEvent(&#x27;mousemove&#x27;, document)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    .until(most.fromEvent(&#x27;click&#x27;, document))</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    .forEach(mouseEvent =&gt; console.log(mouseEvent));</span></div></div></div></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="since"></a>since<a aria-hidden="true" tabindex="-1" class="hash-link" href="#since" title="Direct link to heading">#</a></h3><p>Alias: <strong>skipUntil</strong></p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="streamsincestartsignal---stream"></a><code>stream.since(startSignal) -&gt; Stream</code><a aria-hidden="true" tabindex="-1" class="hash-link" href="#streamsincestartsignal---stream" title="Direct link to heading">#</a></h4><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="mostsincestartsignal-stream---stream"></a><code>most.since(startSignal, stream) -&gt; Stream</code><a aria-hidden="true" tabindex="-1" class="hash-link" href="#mostsincestartsignal-stream---stream" title="Direct link to heading">#</a></h4><p>Create a new stream containing all events after <code>startSignal</code> emits its first event.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">stream:                    -a-b-c-d-e-f-&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">startSignal:               ------z-&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">stream.since(startSignal): -------d-e-f-&gt;</span></div></div></div></div></div><p>If <code>startSignal</code> is empty or never emits an event, then the returned stream will be effectively equivalent to <a href="#mostnever"><code>never()</code></a>.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-es6 codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">// Start logging mouse events when the user clicks.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">most.fromEvent(&#x27;mousemove&#x27;, document)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    .since(most.fromEvent(&#x27;click&#x27;, document))</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    .forEach(mouseEvent =&gt; console.log(mouseEvent));</span></div></div></div></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="during"></a>during<a aria-hidden="true" tabindex="-1" class="hash-link" href="#during" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="streamduringtimewindow"></a><code>stream.during(timeWindow)</code><a aria-hidden="true" tabindex="-1" class="hash-link" href="#streamduringtimewindow" title="Direct link to heading">#</a></h4><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="mostduringtimewindow-stream"></a><code>most.during(timeWindow, stream)</code><a aria-hidden="true" tabindex="-1" class="hash-link" href="#mostduringtimewindow-stream" title="Direct link to heading">#</a></h4><p>Create a new stream containing only events that occur during a dynamic <a href="https://github.com/cujojs/most/wiki/Concepts#time-windows" target="_blank" rel="noopener noreferrer">time window</a>.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">stream:                    -a-b-c-d-e-f-g-&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">timeWindow:                -----s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">s:                               -----t</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">stream.during(timeWindow): -----c-d-e-|</span></div></div></div></div></div><p>This is similar to <a href="#slice">slice</a>, but uses time signals rather than indices to limit the stream.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-es6 codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">// After the first click, log mouse move events for 1 second.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// Note that DOM event handlers will automatically be unregistered.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">const start = most.fromEvent(&#x27;click&#x27;, document);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">const end = most.of().delay(1000);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// Map the first click to a stream containing a 1 second delay</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// The click represents the window start time, after which</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// the window will be open for 1 second.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">const timeWindow = start.constant(end);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">most.fromEvent(&#x27;mousemove&#x27;, document)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    .during(timeWindow)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    .forEach(mouseEvent =&gt; console.log(mouseEvent));</span></div></div></div></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="looping"></a>Looping<a aria-hidden="true" tabindex="-1" class="hash-link" href="#looping" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="loop"></a>loop<a aria-hidden="true" tabindex="-1" class="hash-link" href="#loop" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="streamloopstepper-seed---stream"></a><code>stream.loop(stepper, seed) -&gt; Stream</code><a aria-hidden="true" tabindex="-1" class="hash-link" href="#streamloopstepper-seed---stream" title="Direct link to heading">#</a></h4><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="mostloopstepper-seed-stream---stream"></a><code>most.loop(stepper, seed, stream) -&gt; Stream</code><a aria-hidden="true" tabindex="-1" class="hash-link" href="#mostloopstepper-seed-stream---stream" title="Direct link to heading">#</a></h4><p>Create a feedback loop that emits one value and feeds back another to be used in the next iteration.</p><p>It allows you to maintain and update a &quot;state&quot; (aka feedback, aka <code>seed</code> for the next iteration) while emitting a different value.  In contrast, <a href="#scan"><code>scan</code></a> feeds back and emits the same value.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-es6 codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">// Average an array of values</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">const average = values =&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    values.reduce((sum, x) =&gt; sum + x, 0) / values.length</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">const stream = most.iterate(x =&gt; x + 1, 0)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// Emit the simple (ie windowed) moving average of the 10 most recent values</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">stream.loop((values, x) =&gt; {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    values.push(x);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    values = values.slice(-10); // Keep up to 10 most recent</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    const avg = average(values);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    // Return { seed, value } pair.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    // seed will feed back into next iteration</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    // value will be propagated</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    return { seed: values, value: avg };</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}, [])</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    .take(10)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    .observe(avg =&gt; console.log(avg));</span></div></div></div></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="adapting-fluent-apis"></a>Adapting fluent APIs<a aria-hidden="true" tabindex="-1" class="hash-link" href="#adapting-fluent-apis" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="thru"></a>thru<a aria-hidden="true" tabindex="-1" class="hash-link" href="#thru" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="streamthrutransform---stream"></a><code>stream.thru(transform) -&gt; Stream</code><a aria-hidden="true" tabindex="-1" class="hash-link" href="#streamthrutransform---stream" title="Direct link to heading">#</a></h4><p><code>transform(stream: Stream) -&gt; Stream</code></p><p>Use a functional API in fluent style.</p><p>Functional APIs allow for the highest degree of modularity via external packages, such as <a href="https://github.com/mostjs/hold" target="_blank" rel="noopener noreferrer"><code>@most/hold</code></a>, <em>without the risks of modifying prototypes</em>.</p><p>If you prefer using fluent APIs, <code>thru</code> allows using those functional APIs in a fluent style.  For example:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-es6 codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">import hold from &#x27;@most/hold&#x27;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">import { periodic } from &#x27;most&#x27;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">periodic(10, 1)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    .take(5)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    .scan((total, increment) =&gt; total + increment, 0)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    .thru(hold)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    .observe(x =&gt; console.log(x))</span></div></div></div></div></div><p>rather than mixing functional and fluent:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-es6 codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">import hold from &#x27;@most/hold&#x27;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">import { periodic } from &#x27;most&#x27;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">hold(periodic(10, 1)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    .take(5)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    .scan((total, increment) =&gt; total + increment, 0))</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    .observe(x =&gt; console.log(x))</span></div></div></div></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="multiple-arguments"></a>Multiple arguments<a aria-hidden="true" tabindex="-1" class="hash-link" href="#multiple-arguments" title="Direct link to heading">#</a></h4><p>Multiple arguments should be handled via partial application of the function passed to thru, using <code>bind</code> or a currying or partial application utility from your favorite functional programming library.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-es6 codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">// Via curried transform</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">const transform = curry((x, y, z, stream) =&gt; /* ... */)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">const stream2 = stream1.thru(transform(x, y, z))</span></div></div></div></div></div><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-es6 codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">// Via partial application</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">const transform = (x, y, z, stream) =&gt; // ...</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// Partially apply with partial application helper</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">const stream2 = stream1.thru(partial(transform, x, y, z))</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// Or, partially apply with bind</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">const stream2 = stream1.thru(transform.bind(null, x, y, z)))</span></div></div></div></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="consuming-streams"></a>Consuming streams<a aria-hidden="true" tabindex="-1" class="hash-link" href="#consuming-streams" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="reduce"></a>reduce<a aria-hidden="true" tabindex="-1" class="hash-link" href="#reduce" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="streamreducef-initial---promise"></a><code>stream.reduce(f, initial) -&gt; Promise</code><a aria-hidden="true" tabindex="-1" class="hash-link" href="#streamreducef-initial---promise" title="Direct link to heading">#</a></h4><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="mostreducef-initial-stream---promise"></a><code>most.reduce(f, initial, stream) -&gt; Promise</code><a aria-hidden="true" tabindex="-1" class="hash-link" href="#mostreducef-initial-stream---promise" title="Direct link to heading">#</a></h4><p>Reduce a stream, returning a promise for the ultimate result.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">stream:                -1-2-3-4-|</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">stream.reduce(sum, 0):           10</span></div></div></div></div></div><p>The returned promise will fulfill with the final reduced result, or will reject if a failure occurs while reducing the stream.</p><p>The reduce function (<code>f</code> above)</p><p><em>TODO: Example</em></p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="observe"></a>observe<a aria-hidden="true" tabindex="-1" class="hash-link" href="#observe" title="Direct link to heading">#</a></h3><p>Alias: <strong>forEach</strong></p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="streamobservef---promise"></a><code>stream.observe(f) -&gt; Promise</code><a aria-hidden="true" tabindex="-1" class="hash-link" href="#streamobservef---promise" title="Direct link to heading">#</a></h4><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="streamforeachf---promise"></a><code>stream.forEach(f) -&gt; Promise</code><a aria-hidden="true" tabindex="-1" class="hash-link" href="#streamforeachf---promise" title="Direct link to heading">#</a></h4><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="mostobservef-stream---promise"></a><code>most.observe(f, stream) -&gt; Promise</code><a aria-hidden="true" tabindex="-1" class="hash-link" href="#mostobservef-stream---promise" title="Direct link to heading">#</a></h4><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="mostforeachf-stream---promise"></a><code>most.forEach(f, stream) -&gt; Promise</code><a aria-hidden="true" tabindex="-1" class="hash-link" href="#mostforeachf-stream---promise" title="Direct link to heading">#</a></h4><p>Start consuming events from <code>stream</code>, processing each with <code>f</code>.  The returned promise will fulfill after all the events have been consumed, or will reject if the stream fails and the <a href="#handling-errors">error is not handled</a>.</p><p>The <code>forEach</code> alias is compatible with the <a href="https://github.com/zenparsing/es-observable#api" target="_blank" rel="noopener noreferrer">draft ES Observable proposal <code>forEach</code></a>. Read more about <a href="#es-observable-interop">Observable interop here</a>.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-js codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Log mouse movements until the user clicks, then stop.</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">most</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">fromEvent</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;mousemove&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token dom variable" style="color:rgb(191, 199, 213)">document</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">takeUntil</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">most</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">fromEvent</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;click&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token dom variable" style="color:rgb(191, 199, 213)">document</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">observe</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">x</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> </span><span class="token console class-name" style="color:rgb(255, 203, 107)">console</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">log</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">x</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">then</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> </span><span class="token console class-name" style="color:rgb(255, 203, 107)">console</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">log</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;All done&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span></div></div></div></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="drain"></a>drain<a aria-hidden="true" tabindex="-1" class="hash-link" href="#drain" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="streamdrain---promise"></a><code>stream.drain() -&gt; Promise</code><a aria-hidden="true" tabindex="-1" class="hash-link" href="#streamdrain---promise" title="Direct link to heading">#</a></h4><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="mostdrainstream---promise"></a><code>most.drain(stream) -&gt; Promise</code><a aria-hidden="true" tabindex="-1" class="hash-link" href="#mostdrainstream---promise" title="Direct link to heading">#</a></h4><p>Start consuming events from <code>stream</code>.  This can be useful in some cases where you don&#x27;t want or need to process the terminal events--e.g. when all processing has been done via upstream side-effects.  Most times, however, you&#x27;ll use <a href="#observe"><code>observe</code></a> to consume <em>and process</em> terminal events.</p><p>The returned promise will fulfill after all the events have been consumed, or will reject if the stream fails and the <a href="#handling-errors">error is not handled</a>.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="subscribe"></a>subscribe<a aria-hidden="true" tabindex="-1" class="hash-link" href="#subscribe" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="streamsubscribeobserver---subscription"></a><code>stream.subscribe(Observer) -&gt; Subscription</code><a aria-hidden="true" tabindex="-1" class="hash-link" href="#streamsubscribeobserver---subscription" title="Direct link to heading">#</a></h4><p>Draft ES Observable compatible subscribe.  Start consuming events from <code>stream</code> by providing an <a href="https://github.com/zenparsing/es-observable#observer" target="_blank" rel="noopener noreferrer">Observer object</a>.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-js codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">type </span><span class="token maybe-class-name">Observer</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Receives the next value in the sequence</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token function" style="color:rgb(130, 170, 255)">next</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">value</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">void</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Receives the sequence error</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token function" style="color:rgb(130, 170, 255)">error</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">errorValue</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">void</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Receives the sequence completion signal</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// The completionValue parameter is deprecated</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token function" style="color:rgb(130, 170, 255)">complete</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">completionValue</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">void</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></div></div></div></div><p>Returns a <a href="https://github.com/zenparsing/es-observable#api" target="_blank" rel="noopener noreferrer">Subscription object</a> that can be used to unsubscribe from the stream of events.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-js codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">type </span><span class="token maybe-class-name">Subscription</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Cancels the subscription</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token function" style="color:rgb(130, 170, 255)">unsubscribe</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">void</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></div></div></div></div><p>Read more about <a href="#draft-es-observable-interop">draft ES Observable interop here</a>.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="observeforeach-or-subscribe"></a><code>observe</code>/<code>forEach</code> or <code>subscribe</code><a aria-hidden="true" tabindex="-1" class="hash-link" href="#observeforeach-or-subscribe" title="Direct link to heading">#</a></h3><p>Both <a href="#observe"><code>forEach</code></a> and <a href="#subscribe"><code>subscribe</code></a> are supported in the <a href="https://github.com/zenparsing/es-observable" target="_blank" rel="noopener noreferrer">draft ES Observable proposal</a>, and the following behave similarly:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-js codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">stream</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">forEach</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">handleEvent</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">then</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">handleEnd</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> handleError</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">stream</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">subscribe</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    next</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> handleEvent</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    complete</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> handleEnd</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    error</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> handleError</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span></div></div></div></div></div><p>However, there are also some important differences.</p><p><strong><code>forEach</code></strong></p><ul><li>returns a Promise, which can be transformed further using <code>.then</code>,</li><li>integrates easily into existing asynchronous code that uses promises</li><li>encourages declarative programming using <a href="#until"><code>until</code></a>, <a href="#take"><code>take</code></a>, and <a href="#takeWhile"><code>takeWhile</code></a>, etc.</li></ul><p><strong><code>subscribe</code></strong></p><ul><li>returns a <code>Subscription</code>,</li><li>allows imperative unsubscription in cases where declarative isn&#x27;t possible</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="combining-streams"></a>Combining streams<a aria-hidden="true" tabindex="-1" class="hash-link" href="#combining-streams" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="merge"></a>merge<a aria-hidden="true" tabindex="-1" class="hash-link" href="#merge" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="stream1mergestream2---stream"></a><code>stream1.merge(stream2) -&gt; Stream</code><a aria-hidden="true" tabindex="-1" class="hash-link" href="#stream1mergestream2---stream" title="Direct link to heading">#</a></h4><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="mostmergestream1-stream2---stream"></a><code>most.merge(stream1, stream2) -&gt; Stream</code><a aria-hidden="true" tabindex="-1" class="hash-link" href="#mostmergestream1-stream2---stream" title="Direct link to heading">#</a></h4><p>Create a new stream containing events from <code>stream1</code> and <code>stream2</code>.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">stream1:                -a--b----c---&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">stream2:                --w---x-y--z-&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">stream1.merge(stream2): -aw-b-x-yc-z-&gt;</span></div></div></div></div></div><p>Merging multiple streams creates a new stream containing all events from the input stream without affecting the arrival time of the events.  You can think of the events from the input streams simply being interleaved into the new, merged stream.  A merged stream ends when <em>all</em> of its input streams have ended.</p><p>In contrast to <code>concat</code>, <code>merge</code> preserves the arrival times of events. That is, it creates a new stream where events from <code>stream1</code> and <code>stream2</code> can interleave.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="mergearray"></a>mergeArray<a aria-hidden="true" tabindex="-1" class="hash-link" href="#mergearray" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="mostmergearrayarrayofstreams---stream"></a><code>most.mergeArray(arrayOfStreams) -&gt; Stream</code><a aria-hidden="true" tabindex="-1" class="hash-link" href="#mostmergearrayarrayofstreams---stream" title="Direct link to heading">#</a></h4><p>Array form of <a href="#merge">merge</a>.  Create a new Stream containing all events from all streams in <code>arrayOfStreams</code>.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">s1:                             -a--b----c---&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">s2:                             --w---x-y--z-&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">s3:                             ---1---2----3&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">most.mergeArray([s1, s2, s3]):  -aw1b-x2yc-z3&gt;</span></div></div></div></div></div><p>See <a href="#merge">merge</a> for more details.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="combine"></a>combine<a aria-hidden="true" tabindex="-1" class="hash-link" href="#combine" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="stream1combinef-stream2---stream"></a><code>stream1.combine(f, stream2) -&gt; Stream</code><a aria-hidden="true" tabindex="-1" class="hash-link" href="#stream1combinef-stream2---stream" title="Direct link to heading">#</a></h4><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="mostcombinef-stream1-stream2---stream"></a><code>most.combine(f, stream1, stream2) -&gt; Stream</code><a aria-hidden="true" tabindex="-1" class="hash-link" href="#mostcombinef-stream1-stream2---stream" title="Direct link to heading">#</a></h4><p>Create a new stream that emits the set of latest event values from all input streams whenever a new event arrives on any input stream.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">stream1:                       -0--1----2---&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">stream2:                       --3---4-5--6-&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">stream1.combine(add, stream2): --3-4-5-67-8-&gt;</span></div></div></div></div></div><p>Combining creates a new stream by applying a function to the most recent event from each stream whenever a new event arrives on any one stream.  Combining must wait for at least one event to arrive on all input streams before it can produce any events.</p><p>A combined stream has the same proportion as the max of the proportions of its input streams. To put it imperative terms: combine ends after all its inputs have ended.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-es6 codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">// Add the current value of two inputs</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// Updates the result whenever *either* of the inputs changes!</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// Create a stream from an &lt;input&gt; value</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">const fromInput = input =&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    most.fromEvent(&#x27;change&#x27;, input)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        .map(e =&gt; e.target.value)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        .map(Number)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// Add two numbers</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">const add = (x, y) =&gt; x + y</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// Create streams for the current value of x and y</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">const xStream = fromInput(document.querySelector(&#x27;input.x&#x27;))</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">const yStream = fromInput(document.querySelector(&#x27;input.y&#x27;))</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// Create a result stream by adding x and y</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// This always adds the latest value of x and y</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">const resultStream = most.combine(add, xStream, yStream)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">const resultNode = document.querySelector(&#x27;.result&#x27;)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">resultStream.observe(z =&gt; {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    resultNode.textContent = z</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">})</span></div></div></div></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="combinearray"></a>combineArray<a aria-hidden="true" tabindex="-1" class="hash-link" href="#combinearray" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="mostcombinearrayf-arrayofstreams---stream"></a><code>most.combineArray(f, arrayOfStreams) -&gt; Stream</code><a aria-hidden="true" tabindex="-1" class="hash-link" href="#mostcombinearrayf-arrayofstreams---stream" title="Direct link to heading">#</a></h4><p>Array form of <a href="#combine">combine</a>. Create a new stream that emits the set of latest event values from all input streams whenever a new event arrives on any input stream.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">s1:                                    -0--1----2-&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">s2:                                    --3---4-5--&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">s3:                                    ---2---1---&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">most.combineArray(add3, [s1, s2, s3]): ---56-7678-&gt;</span></div></div></div></div></div><p>See <a href="#combine">combine</a> for more details.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="sample"></a>sample<a aria-hidden="true" tabindex="-1" class="hash-link" href="#sample" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="samplersamplef-streams---stream"></a><code>sampler.sample(f, ...streams) -&gt; Stream</code><a aria-hidden="true" tabindex="-1" class="hash-link" href="#samplersamplef-streams---stream" title="Direct link to heading">#</a></h4><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="mostsamplef-sampler-streams---stream"></a><code>most.sample(f, sampler, ...streams) -&gt; Stream</code><a aria-hidden="true" tabindex="-1" class="hash-link" href="#mostsamplef-sampler-streams---stream" title="Direct link to heading">#</a></h4><p>Create a new stream by combining sampled values from many input streams.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">s1:                          -1-----2-----3-&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">s2:                          -1---2---3---4-&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">sampler:                     -a-a-a-a-a-a-a-&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">sampler.sample(add, s1, s2): -2-2-3-4-5-5-7-&gt;</span></div></div></div></div></div><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">s1:                          -1----2----3-&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">s2:                          -1-2-3-4-5-6-&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">sampler:                     -a--a--a--a--&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">sampler.sample(add, s1, s2): -2--3--6--7--&gt;</span></div></div></div></div></div><p>While <a href="#combine"><code>combine</code></a>, produces a value whenever an event arrives on any of its inputs, <code>sample</code> produces a value only when an event arrives on the sampler.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-js codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Add the current value of two inputs</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Updates only when the user clicks a button</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Create a stream from an &lt;input&gt; value</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:rgb(130, 170, 255)">fromInput</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token parameter">input</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    most</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">fromEvent</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;change&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> input</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">map</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">e</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> e</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">target</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">value</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">map</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token known-class-name class-name" style="color:rgb(255, 203, 107)">Number</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Add two numbers</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:rgb(130, 170, 255)">add</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">x</span><span class="token parameter punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token parameter"> y</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> x </span><span class="token operator" style="color:rgb(137, 221, 255)">+</span><span class="token plain"> y</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Create streams for the current value of x and y</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> xStream </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">fromInput</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token dom variable" style="color:rgb(191, 199, 213)">document</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">querySelector</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;input.x&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> yStream </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">fromInput</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token dom variable" style="color:rgb(191, 199, 213)">document</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">querySelector</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;input.y&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> click </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> most</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">fromEvent</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;click&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token dom variable" style="color:rgb(191, 199, 213)">document</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">querySelector</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;.button&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Create a result stream by adding the values of x and y</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// at the time the button was clicked.</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// NOTE: add() is NOT called when x and y change, but rather</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// only when the button is clicked.</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> resultStream </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> most</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">sample</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">add</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> click</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> xStream</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> yStream</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> resultNode </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token dom variable" style="color:rgb(191, 199, 213)">document</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">querySelector</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;.result&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">resultStream</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">observe</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">z</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    resultNode</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">textContent</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> z</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span></div></div></div></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="samplewith"></a>sampleWith<a aria-hidden="true" tabindex="-1" class="hash-link" href="#samplewith" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="valuessamplewithsampler---stream"></a><code>values.sampleWith(sampler) -&gt; Stream</code><a aria-hidden="true" tabindex="-1" class="hash-link" href="#valuessamplewithsampler---stream" title="Direct link to heading">#</a></h4><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="mostsamplewithsampler-values---stream"></a><code>most.sampleWith(sampler, values) -&gt; Stream</code><a aria-hidden="true" tabindex="-1" class="hash-link" href="#mostsamplewithsampler-values---stream" title="Direct link to heading">#</a></h4><p>When an event arrives on sampler, emit the latest event value from values.  Effectively equivalent to <code>sampler.sample(identity, values);</code></p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">values:                     -1---2-3---4-5---6-7---8-&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">sampler:                    ---a---a---a---a---a---a-&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">values.sampleWith(sampler): ---1---3---4---5---7---8-&gt;</span></div></div></div></div></div><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">values:                     -1----2----3----4----5---&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">sampler:                    -a-a-a-a-a-a-a-a-a-a-a-a-&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">values.sampleWith(sampler): -1-1-1-2-2-3-3-3-4-4-5-5-&gt;</span></div></div></div></div></div><p>Sampling can &quot;smooth&quot; an erratic source, or can act as a dynamic throttle to speed or slow events from one stream using another.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-js codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Log mouse position whenever the user presses a key</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">most</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">fromEvent</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;mousemove&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token dom variable" style="color:rgb(191, 199, 213)">document</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">sampleWith</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">most</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">fromEvent</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;keydown&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token dom variable" style="color:rgb(191, 199, 213)">document</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">observe</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token console class-name" style="color:rgb(255, 203, 107)">console</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">log</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">bind</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">console</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></div></div></div></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="zip"></a>zip<a aria-hidden="true" tabindex="-1" class="hash-link" href="#zip" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="stream1zipf-stream2---stream"></a><code>stream1.zip(f, stream2) -&gt; Stream</code><a aria-hidden="true" tabindex="-1" class="hash-link" href="#stream1zipf-stream2---stream" title="Direct link to heading">#</a></h4><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="mostzipf-stream1-stream2---stream"></a><code>most.zip(f, stream1, stream2) -&gt; Stream</code><a aria-hidden="true" tabindex="-1" class="hash-link" href="#mostzipf-stream1-stream2---stream" title="Direct link to heading">#</a></h4><p>Create a new stream by applying a function to corresponding pairs of events from the inputs streams.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">stream1:                   -1--2--3--4-&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">stream2:                   -1---2---3---4-&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">stream1.zip(add, stream2): -2---4---6---8-&gt;</span></div></div></div></div></div><p>Zipping correlates <em>by index</em> corresponding events from two or more input streams.  Note that zipping a &quot;fast&quot; stream and a &quot;slow&quot; stream will cause buffering.  Events from the fast stream must be buffered in memory until an event at the corresponding index arrives on the slow stream.</p><p>A zipped stream ends when any one of its input streams ends.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-es6 codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">const add = (x, y) =&gt; x + y</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// Logs 5 7 9</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// In other words: add(1, 4) add(2, 5) add(3, 6)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">most.from([1,2,3])</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    .zip(add, most.from([4,5,6,7,8]))</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    .forEach(x =&gt; console.log(x))</span></div></div></div></div></div><p>A stream zipped with a stream created by <code>most.periodic</code> will emit events in intervals.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-es6 codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">// Logs new sum every second</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">most.from([1, 2, 3, 4])</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    .zip(v =&gt; v, most.periodic(1000))</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    .scan((result, y) =&gt; result + y, 0)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    .forEach(x =&gt; console.log(x))</span></div></div></div></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="combining-higher-order-streams"></a>Combining higher-order streams<a aria-hidden="true" tabindex="-1" class="hash-link" href="#combining-higher-order-streams" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="switchlatest"></a>switchLatest<a aria-hidden="true" tabindex="-1" class="hash-link" href="#switchlatest" title="Direct link to heading">#</a></h3><p>Alias: <strong>switch</strong></p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="streamswitchlatest---stream"></a><code>stream.switchLatest() -&gt; Stream</code><a aria-hidden="true" tabindex="-1" class="hash-link" href="#streamswitchlatest---stream" title="Direct link to heading">#</a></h4><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="mostswitchlateststream---stream"></a><code>most.switchLatest(stream) -&gt; Stream</code><a aria-hidden="true" tabindex="-1" class="hash-link" href="#mostswitchlateststream---stream" title="Direct link to heading">#</a></h4><p>Given a <a href="https://github.com/cujojs/most/wiki/Concepts#higher-order-streams" target="_blank" rel="noopener noreferrer">higher-order stream</a>, return a new stream that adopts the behavior of (ie emits the events of) the most recent inner stream.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">s:                     -a-b-c-d-e-f-&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">t:                     -1-2-3-4-5-6-&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">stream:                -s-----t-----&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">stream.switchLatest(): -a-b-c-4-5-6-&gt;</span></div></div></div></div></div><p><em>TODO: Example</em></p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="join"></a>join<a aria-hidden="true" tabindex="-1" class="hash-link" href="#join" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="streamjoin---stream"></a><code>stream.join() -&gt; Stream</code><a aria-hidden="true" tabindex="-1" class="hash-link" href="#streamjoin---stream" title="Direct link to heading">#</a></h4><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="mostjoinstream---stream"></a><code>most.join(stream) -&gt; Stream</code><a aria-hidden="true" tabindex="-1" class="hash-link" href="#mostjoinstream---stream" title="Direct link to heading">#</a></h4><p>Given a <a href="https://github.com/cujojs/most/wiki/Concepts#higher-order-streams" target="_blank" rel="noopener noreferrer">higher-order stream</a>, return a new stream that merges all the inner streams as they arrive.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">s:             ---a---b---c---d--&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">t:             -1--2--3--4--5--6-&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">stream:        -s------t---------&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">stream.join(): ---a---b--4c-5-d6-&gt;</span></div></div></div></div></div><p><em>TODO: Example</em></p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="mergeconcurrently"></a>mergeConcurrently<a aria-hidden="true" tabindex="-1" class="hash-link" href="#mergeconcurrently" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="streammergeconcurrentlyconcurrency---stream"></a><code>stream.mergeConcurrently(concurrency) -&gt; Stream</code><a aria-hidden="true" tabindex="-1" class="hash-link" href="#streammergeconcurrentlyconcurrency---stream" title="Direct link to heading">#</a></h4><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="mostmergeconcurrentlyconcurrency-stream---stream"></a><code>most.mergeConcurrently(concurrency, stream) -&gt; Stream</code><a aria-hidden="true" tabindex="-1" class="hash-link" href="#mostmergeconcurrentlyconcurrency-stream---stream" title="Direct link to heading">#</a></h4><p>Given a <a href="https://github.com/cujojs/most/wiki/Concepts#higher-order-streams" target="_blank" rel="noopener noreferrer">higher-order stream</a>, return a new stream that merges inner streams as they arrive <em>up to the specified concurrency</em>.  Once <code>concurrency</code> number of streams are being merged, newly arriving streams will be merged after an existing one ends.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">s:                           --a--b--c--d--e--&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">t:                           --x------y|</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">u:                           -1--2--3--4--5--6&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">stream:                      -s--t--u---------&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">stream.mergeConcurrently(2): --a--b--cy4d-5e-6&gt;</span></div></div></div></div></div><p>Note that <code>u</code> is only merged <em>after</em> <code>t</code> ends, due to the concurrency level of <code>2</code>.</p><p>Note also that <code>stream.mergeConcurrently(Infinity)</code> is equivalent to <a href="#join"><code>stream.join()</code></a>.</p><p>To control concurrency, <code>mergeConcurrently</code> must maintain an internal queue of newly arrived streams.  If new streams arrive faster than the concurrency level allows them to be merged, the internal queue will grow infinitely.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="awaiting-promises"></a>Awaiting promises<a aria-hidden="true" tabindex="-1" class="hash-link" href="#awaiting-promises" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="awaitpromises"></a>awaitPromises<a aria-hidden="true" tabindex="-1" class="hash-link" href="#awaitpromises" title="Direct link to heading">#</a></h3><p>Deprecated alias: <code>await</code></p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="streamawaitpromises---stream"></a><code>stream.awaitPromises() -&gt; Stream</code><a aria-hidden="true" tabindex="-1" class="hash-link" href="#streamawaitpromises---stream" title="Direct link to heading">#</a></h4><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="mostawaitpromisesstream---stream"></a><code>most.awaitPromises(stream) -&gt; Stream</code><a aria-hidden="true" tabindex="-1" class="hash-link" href="#mostawaitpromisesstream---stream" title="Direct link to heading">#</a></h4><p>Given a stream of promises, ie Stream&lt;Promise&lt;X&gt;&gt;, return a new stream containing the fulfillment values, ie Stream&lt;X&gt;.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">promise p:              ---1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">promise q:              ------2</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">promise r:              -3</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">stream:                 -p---q---r-&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">stream.awaitPromises(): ---1--2--3-&gt;</span></div></div></div></div></div><p>Event <em>times</em> may be delayed.  However, event <em>order</em> is always preserved, regardless of promise fulfillment order.</p><p>To create a stream that merges promises in fulfillment order, use
<code>stream.chain(most.fromPromise)</code>.  Note the difference:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">promise p:                        --1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">promise q:                        --------2</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">promise r:                        ------3</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">stream:                           -p-q-r-----&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">stream.chain(most.fromPromise):   --1---3-2--&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">stream.awaitPromises():           --1-----23-&gt;</span></div></div></div></div></div><p>If a promise rejects, the stream will be in an error state with the rejected promise&#x27;s reason as its error.  See <a href="#recoverwith">recoverWith</a> for error recovery.  For example:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">promise p:              ---1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">promise q:              ------X</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">promise r:              -3</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">stream:                 -p---q---r-&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">stream.awaitPromises(): ---1--X</span></div></div></div></div></div><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-es6 codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">const urls = [&#x27;http://...&#x27;, &#x27;http://...&#x27;, &#x27;http://...&#x27;]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">const fetchContent = url =&gt; {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   // ... fetch url and return a promise for it ...</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   //</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   return Promise.resolve(url)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">const streamOfPromises = most.from(urls).map(fetchContent)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">const streamOfContent = streamOfPromises.await()</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">streamOfContent.forEach(content =&gt; console.log(content))</span></div></div></div></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="rate-limiting-streams"></a>Rate limiting streams<a aria-hidden="true" tabindex="-1" class="hash-link" href="#rate-limiting-streams" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="debounce"></a>debounce<a aria-hidden="true" tabindex="-1" class="hash-link" href="#debounce" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="streamdebouncedebouncetime---stream"></a><code>stream.debounce(debounceTime) -&gt; Stream</code><a aria-hidden="true" tabindex="-1" class="hash-link" href="#streamdebouncedebouncetime---stream" title="Direct link to heading">#</a></h4><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="mostdebouncedebouncetime-stream---stream"></a><code>most.debounce(debounceTime, stream) -&gt; Stream</code><a aria-hidden="true" tabindex="-1" class="hash-link" href="#mostdebouncedebouncetime-stream---stream" title="Direct link to heading">#</a></h4><p>Wait for a burst of events to subside and emit only the last event in the burst.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">stream:             abcd----abcd----&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">stream.debounce(2): -----d-------d--&gt;</span></div></div></div></div></div><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">s1:                       abcd----abcd----&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">s2:                       ------------|</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">s1.until(s2).debounce(2): -----d------d|</span></div></div></div></div></div><p>If the stream ends while there is a pending debounced event (e.g. via <a href="#until"><code>until</code></a>, see example above), the pending event will be emitted just before the stream ends.</p><p>Debouncing can be extremely useful when dealing with bursts of similar events, for example, debouncing keypress events before initiating a remote search query in a browser application.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-es6 codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">const searchInput = document.querySelector(&#x27;[name=&quot;search-text&quot;]&#x27;);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">const searchText = most.fromEvent(&#x27;input&#x27;, searchInput);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// Logs the current value of the searchInput, only after the</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// user stops typing for 500 millis</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">searchText.debounce(500)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    .map(e =&gt; e.target.value)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    .observe(x =&gt; console.log(x));</span></div></div></div></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="throttle"></a>throttle<a aria-hidden="true" tabindex="-1" class="hash-link" href="#throttle" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="streamthrottlethrottleperiod---stream"></a><code>stream.throttle(throttlePeriod) -&gt; Stream</code><a aria-hidden="true" tabindex="-1" class="hash-link" href="#streamthrottlethrottleperiod---stream" title="Direct link to heading">#</a></h4><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="mostthrottlethrottleperiod-stream---stream"></a><code>most.throttle(throttlePeriod, stream) -&gt; Stream</code><a aria-hidden="true" tabindex="-1" class="hash-link" href="#mostthrottlethrottleperiod-stream---stream" title="Direct link to heading">#</a></h4><p>Limit the rate of events to at most one per throttlePeriod.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">stream:              abcd----abcd----&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">stream.throttle(2):  a-c-----a-c-----&gt;</span></div></div></div></div></div><p>In contrast to debounce, throttle simply drops events that occur more often than <code>throttlePeriod</code>, whereas debounce waits for a &quot;quiet period&quot;.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="delaying-streams"></a>Delaying streams<a aria-hidden="true" tabindex="-1" class="hash-link" href="#delaying-streams" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="delay"></a>delay<a aria-hidden="true" tabindex="-1" class="hash-link" href="#delay" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="streamdelaydelaytime---stream"></a><code>stream.delay(delayTime) -&gt; Stream</code><a aria-hidden="true" tabindex="-1" class="hash-link" href="#streamdelaydelaytime---stream" title="Direct link to heading">#</a></h4><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="mostdelaydelaytime-stream---stream"></a><code>most.delay(delayTime, stream) -&gt; Stream</code><a aria-hidden="true" tabindex="-1" class="hash-link" href="#mostdelaydelaytime-stream---stream" title="Direct link to heading">#</a></h4><p>Timeshift a <code>stream</code> by <code>delayTime</code>.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">stream:          -a-b-c-d-&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">stream.delay(1): --a-b-c-d-&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">stream.delay(5): ------a-b-c-d-&gt;</span></div></div></div></div></div><p>Delaying a stream timeshifts all the events by the same amount.  Delaying doesn&#x27;t change the time <em>between</em> events.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="sharing-streams"></a>Sharing streams<a aria-hidden="true" tabindex="-1" class="hash-link" href="#sharing-streams" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="multicast"></a>multicast<a aria-hidden="true" tabindex="-1" class="hash-link" href="#multicast" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="streammulticast---stream"></a><code>stream.multicast() -&gt; Stream</code><a aria-hidden="true" tabindex="-1" class="hash-link" href="#streammulticast---stream" title="Direct link to heading">#</a></h4><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="mostmulticaststream---stream"></a><code>most.multicast(stream) -&gt; Stream</code><a aria-hidden="true" tabindex="-1" class="hash-link" href="#mostmulticaststream---stream" title="Direct link to heading">#</a></h4><p>Returns a stream equivalent to the original, but which can be shared more efficiently among multiple consumers.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">stream:             -a-b-c-d-&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">stream.multicast(): -a-b-c-d-&gt;</span></div></div></div></div></div><p>Using <code>multicast</code> allows you to build up a stream of maps, filters, and other transformations, and then share it efficiently with multiple observers.</p></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/nodefluent/kafka-streams/website/docs/most-api.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 40 40" style="margin-right:0.3em;vertical-align:sub"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/kafka-streams/docs/ksAPI"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« API info</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/kafka-streams/docs/native"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Native Consumer/Producer Explanation »</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_3klQ"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#notation" class="table-of-contents__link">Notation</a><ul><li><a href="#examples" class="table-of-contents__link">Examples</a></li><li><a href="#consuming-mostjs-streams-with-other-libraries" class="table-of-contents__link">Consuming most.js streams with other libraries</a></li><li><a href="#consuming-draft-es-observables-with-mostjs" class="table-of-contents__link">Consuming draft ES Observables with most.js</a></li></ul></li><li><a href="#creating-streams" class="table-of-contents__link">Creating streams</a><ul><li><a href="#mostjust" class="table-of-contents__link">most.just</a></li><li><a href="#mostfrompromise" class="table-of-contents__link">most.fromPromise</a></li><li><a href="#mostfrom" class="table-of-contents__link">most.from</a></li><li><a href="#mostperiodic" class="table-of-contents__link">most.periodic</a></li><li><a href="#mostempty" class="table-of-contents__link">most.empty</a></li><li><a href="#mostnever" class="table-of-contents__link">most.never</a></li><li><a href="#mostiterate" class="table-of-contents__link">most.iterate</a></li><li><a href="#mostunfold" class="table-of-contents__link">most.unfold</a></li><li><a href="#mostgenerate" class="table-of-contents__link">most.generate</a></li><li><a href="#mostfromevent" class="table-of-contents__link">most.fromEvent</a></li><li><a href="#startwith" class="table-of-contents__link">startWith</a></li><li><a href="#concat" class="table-of-contents__link">concat</a></li></ul></li><li><a href="#handling-errors" class="table-of-contents__link">Handling errors</a><ul><li><a href="#recoverwith" class="table-of-contents__link">recoverWith</a></li><li><a href="#mostthrowerror" class="table-of-contents__link">most.throwError</a></li></ul></li><li><a href="#transforming-streams" class="table-of-contents__link">Transforming streams</a><ul><li><a href="#map" class="table-of-contents__link">map</a></li><li><a href="#constant" class="table-of-contents__link">constant</a></li><li><a href="#scan" class="table-of-contents__link">scan</a></li><li><a href="#chain" class="table-of-contents__link">chain</a></li><li><a href="#continuewith" class="table-of-contents__link">continueWith</a></li><li><a href="#concatmap" class="table-of-contents__link">concatMap</a></li><li><a href="#ap" class="table-of-contents__link">ap</a></li><li><a href="#timestamp" class="table-of-contents__link">timestamp</a></li><li><a href="#tap" class="table-of-contents__link">tap</a></li></ul></li><li><a href="#filtering-streams" class="table-of-contents__link">Filtering streams</a><ul><li><a href="#filter" class="table-of-contents__link">filter</a></li><li><a href="#skiprepeats" class="table-of-contents__link">skipRepeats</a></li><li><a href="#skiprepeatswith" class="table-of-contents__link">skipRepeatsWith</a></li></ul></li><li><a href="#transducer-support" class="table-of-contents__link">Transducer support</a><ul><li><a href="#transduce" class="table-of-contents__link">transduce</a></li></ul></li><li><a href="#slicing-streams" class="table-of-contents__link">Slicing streams</a><ul><li><a href="#slice" class="table-of-contents__link">slice</a></li><li><a href="#take" class="table-of-contents__link">take</a></li><li><a href="#skip" class="table-of-contents__link">skip</a></li><li><a href="#takewhile" class="table-of-contents__link">takeWhile</a></li><li><a href="#skipwhile" class="table-of-contents__link">skipWhile</a></li><li><a href="#until" class="table-of-contents__link">until</a></li><li><a href="#since" class="table-of-contents__link">since</a></li><li><a href="#during" class="table-of-contents__link">during</a></li></ul></li><li><a href="#looping" class="table-of-contents__link">Looping</a><ul><li><a href="#loop" class="table-of-contents__link">loop</a></li></ul></li><li><a href="#adapting-fluent-apis" class="table-of-contents__link">Adapting fluent APIs</a><ul><li><a href="#thru" class="table-of-contents__link">thru</a></li></ul></li><li><a href="#consuming-streams" class="table-of-contents__link">Consuming streams</a><ul><li><a href="#reduce" class="table-of-contents__link">reduce</a></li><li><a href="#observe" class="table-of-contents__link">observe</a></li><li><a href="#drain" class="table-of-contents__link">drain</a></li><li><a href="#subscribe" class="table-of-contents__link">subscribe</a></li><li><a href="#observeforeach-or-subscribe" class="table-of-contents__link"><code>observe</code>/<code>forEach</code> or <code>subscribe</code></a></li></ul></li><li><a href="#combining-streams" class="table-of-contents__link">Combining streams</a><ul><li><a href="#merge" class="table-of-contents__link">merge</a></li><li><a href="#mergearray" class="table-of-contents__link">mergeArray</a></li><li><a href="#combine" class="table-of-contents__link">combine</a></li><li><a href="#combinearray" class="table-of-contents__link">combineArray</a></li><li><a href="#sample" class="table-of-contents__link">sample</a></li><li><a href="#samplewith" class="table-of-contents__link">sampleWith</a></li><li><a href="#zip" class="table-of-contents__link">zip</a></li></ul></li><li><a href="#combining-higher-order-streams" class="table-of-contents__link">Combining higher-order streams</a><ul><li><a href="#switchlatest" class="table-of-contents__link">switchLatest</a></li><li><a href="#join" class="table-of-contents__link">join</a></li><li><a href="#mergeconcurrently" class="table-of-contents__link">mergeConcurrently</a></li></ul></li><li><a href="#awaiting-promises" class="table-of-contents__link">Awaiting promises</a><ul><li><a href="#awaitpromises" class="table-of-contents__link">awaitPromises</a></li></ul></li><li><a href="#rate-limiting-streams" class="table-of-contents__link">Rate limiting streams</a><ul><li><a href="#debounce" class="table-of-contents__link">debounce</a></li><li><a href="#throttle" class="table-of-contents__link">throttle</a></li></ul></li><li><a href="#delaying-streams" class="table-of-contents__link">Delaying streams</a><ul><li><a href="#delay" class="table-of-contents__link">delay</a></li></ul></li><li><a href="#sharing-streams" class="table-of-contents__link">Sharing streams</a><ul><li><a href="#multicast" class="table-of-contents__link">multicast</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/kafka-streams/docs/">Get Started</a></li></ul></div></div><div class="text--center"><div>Copyright © 2020. Built with Docusaurus.</div></div></div></footer></div>
<script src="/kafka-streams/styles.1a871891.js"></script>
<script src="/kafka-streams/runtime~main.7b8057bb.js"></script>
<script src="/kafka-streams/main.796efdb0.js"></script>
<script src="/kafka-streams/1.c9d93e90.js"></script>
<script src="/kafka-streams/2.2ed3b975.js"></script>
<script src="/kafka-streams/16.82e5cb28.js"></script>
<script src="/kafka-streams/17.6c960b8e.js"></script>
<script src="/kafka-streams/6c605efb.8fd640ff.js"></script>
<script src="/kafka-streams/17896441.92507d38.js"></script>
<script src="/kafka-streams/6f256d78.67738481.js"></script>
</body>
</html>